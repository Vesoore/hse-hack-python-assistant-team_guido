# AI Assistant Hack: Python


## Описание проекта

Этот проект направлен на создание алгоритма, который помогает студентам исправлять ошибки в их Python-коде, ориентируясь не только на синтаксические ошибки, но и на логические. Алгоритм может анализировать код студентов, находить ошибки, подсказывать, как их исправить, и защищен от попыток злоупотребления, таких как запросы прямых решений или других запрещённых действий (например, использования нецензурной лексики).

Ключевая часть решения — это модель, которая классифицирует токсичные сообщения, чтобы избежать неподобающих запросов и подсказок.

### Основные компоненты проекта:

1. **Классы для обработки запросов**:
   - `BaseModel`: Абстрактный базовый класс для работы с различными моделями.
   - `YandexGPT`: Класс для взаимодействия с GPT моделью от Yandex, которая используется для генерации ответов на запросы студентов.
   - `ToxiClassifier`: Класс для анализа токсичности входных данных, который помогает блокировать неприемлемые запросы и выводы.

2. **Алгоритм анализа кода**:
   - Основная задача алгоритма — выявление логических и синтаксических ошибок в коде студентов. 
   - Система использует несколько шагов для обработки кода и формирования ответов.

3. **Docker контейнер**:
   - Проект развёрнут внутри Docker-контейнера для простоты запуска и изоляции окружения. Это позволяет запускать проект с минимальными усилиями и без зависимости от локального окружения.

4. **Инструмент для генерации файла submit**:
   - Скрипт позволяет взять решения студентов, проанализировать их, создать отчёт и сохранить его в формате CSV. Файл отчета включает информацию о каждой строке кода, её возможных ошибках и рекомендациях по исправлению.

---

## Структура проекта

- `main.py`: Главный файл запуска проекта.
- `app/models/`: Каталог с реализацией моделей и классов для анализа данных.
- `app/utils/`: Вспомогательные функции, включая классификатор токсичности.
- `Dockerfile`: Конфигурационный файл Docker для создания контейнера.
- `data/`: Папка для хранения входных и выходных данных.
- `requirements.txt` или `pyproject.toml`: Файлы с зависимостями проекта.


## Инструкция по запуску проекта в Docker

1. **Установка Docker**:
   Если у вас ещё не установлен Docker, его можно установить, следуя [официальной инструкции](https://docs.docker.com/get-docker/).


## Запуск

## Инструкция по получению доступа к дообученной модели YandexGPT-PRO-HSE-Hack-9k (bt1e87efnjbim8sq56b2)

1) Необходимо направить ВАШУ почту, привязанную к Yandex Cloud, в https://t.me/MaxLSE, чтобы выдать доступ на использование дообученной модели.
2) Следующим шагом Вам надо сгенерировать iam-token и вставить его в файл .env

```bash
yc iam create-token
```

3) folder-id можно узнать, воспользовавшись командой

```bash
yc config list
```

## Инструкция по запуску проекта в Docker

### Шаг 1: Установка Docker

Если Docker ещё не установлен, следуйте [официальной инструкции](https://docs.docker.com/get-docker/) для установки на вашу операционную систему.

### Шаг 2: Клонирование репозитория

Склонируйте проект на ваш локальный компьютер, используя Git. Выполните следующие команды:

```bash
git clone <ссылка-на-репозиторий>
cd <название-папки-с-проектом>
```
### Шаг 3: Сборка Docker-контейнера
Для того чтобы создать Docker-контейнер, выполните команду сборки образа:
1) Это создаст Docker-образ с именем gpt:v1 на основе Dockerfile, который находится в проекте.

```bash
docker build -t gpt:v1 .
```

2) Запустите контейнер в интерактивнов режиме
```bash
docker run -it -v $(pwd)/submit:/app/data/processed gpt:v1
```

3) Выполните команду для запуска скрипта
```bash
poetry run python main.py
```
4) Во втором терминле выполните команду
```bash
docker ps # чтобы узнать <CONTAINER_ID>
docker cp <CONTAINER_ID>:/app/data/processed/submission.csv ./submission.csv
```
Ваш файл будет в дирректории


### В локальной среде

`Poetry` является более продвинутым пакетным менеджером, чем `pip`. На с большей вероятность не возникнет ситуации, что нужные пакеты установятся неправильно.

```bash
poetry install
```


## Структура проекта

```
.
├── app
│   ├── __init__.py
│   ├── models   <------------------------ подключаемые модели
│   │   ├── base.py
│   │   ├── __init__.py
│   │   └── yandexgpt.py
│   └── utils    <------------------------ утилиты
│       ├── __init__.py
│       ├── metric.py <------------------------ ознакомьтесь с метрикой
│       │── toxiclassifier.py
│       └── submit.py <------------------------ здесь всё для генерации сабмита
├── data
│   ├── complete <------------------------ подготовленные данные, сабмиты
│   ├── processed <----------------------- промежуточный этап подготовки данных
│   └── raw <----------------------------- исходные данные
│       ├── submit_example.csv
│       ├── test
│       │   ├── solutions.xlsx
│       │   ├── tasks.xlsx
│       │   └── tests.xlsx
│       └── train
│           ├── solutions.xlsx
│           ├── tasks.xlsx
│           └── tests.xlsx
├── main.py <---------------------------- [ВАЖНО] Именно этот скрипт мы будем запускать при проверке ваших решений. Он должен генерировать финальный сабмит.
├── notebooks
│   └── yandexgpt.ipynb
├── poetry.lock
├── pyproject.toml
├── README.md
└── tests
    ├── test_correctness.py <------------------------ проверить на корректность сабмит
    └── test_embedding_generation.py <--------------- попробовать генерацию эмбеддингов и подсчёт метрики


```